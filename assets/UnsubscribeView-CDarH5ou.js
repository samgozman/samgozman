import{d as b,e as _,r as a,b as m,c as d,w as f,_ as h,h as p,o as n,a as t,f as c,t as v,B as k}from"./index-DVeLQdnf.js";const x=t("h2",null,"Unsubscribe fom blog:",-1),y={key:0,class:"text-error"},g={key:1},w={class:"flex flex-col max-w-80"},B=["value"],U=t("button",{class:"btn btn-primary mt-2"},"Unsubscribe",-1),C=b({__name:"UnsubscribeView",setup(R){_({title:"Unsubscribe | Sam Gozman"});const s=a("Confirm unsubscribing"),r=a(""),u=a(""),l=p();m(async()=>{const e=new URL(window.location.href).searchParams.get("token");if(!e){s.value="Invalid token";return}r.value=e});const i=async o=>{o.preventDefault();try{if(!(await k.unsubscribe(r.value,u.value)).ok)return;s.value="",setTimeout(()=>{l.push({name:"home"})},5e3)}catch(e){s.value="Failed to unsubscribe",console.error(e)}};return(o,e)=>(n(),d(h,null,{default:f(()=>[x,t("form",{onSubmit:i},[s.value?(n(),c("p",y,v(s.value),1)):(n(),c("p",g,"You have successfully unsubscribed from my blog! ðŸ˜¢")),t("div",w,[t("textarea",{class:"textarea textarea-bordered",placeholder:"Reason for unsubscribing",value:u.value},null,8,B),U])],32)]),_:1}))}});export{C as default};
//# sourceMappingURL=UnsubscribeView-CDarH5ou.js.map
