import{d as b,r as n,e as _,c as m,w as d,_ as f,h,o as a,a as t,b as u,t as p,B as v}from"./index-Bqyj4kK-.js";const k=t("h2",null,"Unsubscribe fom blog:",-1),w={key:0,class:"text-error"},x={key:1},y={class:"flex flex-col max-w-80"},g=["value"],B=t("button",{class:"btn btn-primary mt-2"},"Unsubscribe",-1),C=b({__name:"UnsubscribeView",setup(U){window.document.title="Unsubscribe  | Sam Gozman";const s=n("Confirm unsubscribing"),r=n(""),c=n(""),l=h();_(async()=>{const e=new URL(window.location.href).searchParams.get("token");if(!e){s.value="Invalid token";return}r.value=e});const i=async o=>{o.preventDefault();try{if(!(await v.unsubscribe(r.value,c.value)).ok)return;s.value="",setTimeout(()=>{l.push({name:"home"})},5e3)}catch(e){s.value="Failed to unsubscribe",console.error(e)}};return(o,e)=>(a(),m(f,null,{default:d(()=>[k,t("form",{onSubmit:i},[s.value?(a(),u("p",w,p(s.value),1)):(a(),u("p",x,"You have successfully unsubscribed from my blog! ðŸ˜¢")),t("div",y,[t("textarea",{class:"textarea textarea-bordered",placeholder:"Reason for unsubscribing",value:c.value},null,8,g),B])],32)]),_:1}))}});export{C as default};
//# sourceMappingURL=UnsubscribeView-YiTmfesg.js.map
